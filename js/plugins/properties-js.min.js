var xDown=null,yDown=null;!function(r){function e(){var a=r(".property-information").height()+r(".panel-options").innerHeight()+21,t=r("#property-description");if(t.length)var e=t.height()+60;else{e=0;r(".temporal-content").css({"border-bottom":"0"})}r(".temporal-content").height(e).css({top:a+"px"}).animate({opacity:"1"})}function o(){var a=r(".property-details.r-hidden").height()+r(".panel-options").height()+26,t=r(".property-description");if(t.length)var e=t.height()+35;else{e=0;r(".temporal-content-bl").css({"border-bottom":"0"})}r(".temporal-content-bl").height(e).css({top:a+"px"}).animate({opacity:"1"})}function a(a,t){if(void 0!==t&&t.length){var e=t.length;a.css("width",e/l*100+"%"),t.css("width",100/e+"%")}}function t(){switch(!0){case i<768:l=1;break;case 768<=i&&i<1024:l=2;break;case 1024<=i:l=3}}function s(a){var t;a.hasClass("active_modal")?r(".overlay_modal").removeClass("active_modal"):(a.addClass("active_modal"),a.find("form").find("input").eq(0).focus(),r("html").addClass("modal_mobile")),(t=a.find(".close")).click(function(){var a=t.closest(".active_modal");a.removeClass("active_modal"),r("html").removeClass("modal_mobile")})}r(function(){r("body").on("touchstart","#full-slider",function(a){a.stopPropagation(),xDown=a.originalEvent.touches[0].clientX,yDown=a.originalEvent.touches[0].clientY}),r("body").on("touchstart","#modal_img_propertie .wrapper-img",function(a){a.stopPropagation(),xDown=a.originalEvent.touches[0].clientX,yDown=a.originalEvent.touches[0].clientY}),r("body").on("touchmove","#full-slider",function(a){if(xDown&&yDown){var t=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY,o=xDown-t,n=yDown-e;Math.abs(o)>Math.abs(n)&&(a.preventDefault(),0<o?r(this).find(".next").click():r(this).find(".prev").click()),yDown=xDown=null}}),r("body").on("touchmove","#modal_img_propertie .wrapper-img",function(a){if(xDown&&yDown){var t=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY,o=xDown-t,n=yDown-e;Math.abs(o)>Math.abs(n)&&(a.preventDefault(),0<o?r(this).find(".next").click():r(this).find(".prev").click()),yDown=xDown=null}})}),r(window).on("load",function(){var a=r(".content-avatar-image .lazy-img").attr("data-src");void 0!==a&&r(".content-avatar-image .lazy-img").attr("src",a).removeAttr("data-src").addClass("active");var t=r("#min-map").attr("data-map-img");void 0!==t&&r("#min-map").css("background-image","url('"+t+"')").removeAttr("data-map-img"),r(window).scroll(function(){window_y=r(window).scrollTop();var a,t,e,o=r("#content-map #map").attr("data-lat"),n=r("#content-map #map").attr("data-lng");300<=window_y&&(r(".similar-properties .lazy-img").each(function(){var a=r(this).attr("data-src");void 0!==a&&r(this).attr("src",a).removeAttr("data-src").addClass("active")}),void 0!==o&&void 0!==n&&(a=r("#map"),t={lat:parseFloat(a.data("lat")),lng:parseFloat(a.data("lng"))},e=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t}),new google.maps.Marker({position:t,map:e}),r("#map").removeAttr("data-lat"),r("#map").removeAttr("data-lng")))}),e(),o()}),r(window).resize(function(){e(),o()});var n=r(window),i=n.width();n.on("resize",function(){i=n.width(),setTimeout(function(){t(),a(d,m)},100)});var l=0;t();r("#full-main");var c=r("#full-slider .wrap-slider");if(c.length){var d=c.find("ul"),m=d.find("li");1<m.length?(a(d,m),d.data("frame","1")):(c.find(".next, .prev").css("display","none"),console.log("no hay frames para crear el slider"))}r(function(){r(".chk_save_property").click(function(a){a.stopPropagation(),a.preventDefault();var t=r(this);if(r(".chk_save").hasClass("working"))return!1;if("yes"==__flex_g_settings.anonymous)return s(r("#modal_login"));var e=t.data("class-id"),o=t.data("mls"),n=t.attr("data-alert-token"),i=t.attr("data-address");r(".chk_save").addClass("working"),r(this).find("span").hasClass("active")?r.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:o,type_action:"remove",token_alert:n},dataType:"json",success:function(){r(".chk_save").removeClass("working"),r(".chk_save").removeAttr("data-alert-token").find("span").removeClass("active").text("save favorite")}}):r.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:o,subject:i,type_action:"add"},dataType:"json",success:function(a){r(".chk_save").removeClass("working"),r(".chk_save").attr("data-alert-token",a.token_alert).find("span").addClass("active").text("remove favorite")}})})})}(jQuery);